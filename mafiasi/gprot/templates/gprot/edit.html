{% extends "base.html" %}
{% load i18n %}

{% block wtitle %}{% blocktrans with course_name=gprot.course.name %}Memory minutes: {{ course_name }}{% endblocktrans %}{% endblock %}

{% block ptitle %}{{ gprot.course.name }}{% if gprot.published %}<span class="label label-success pull-right">{% trans "published" %}</span>{% else %}<span class="label label-danger pull-right">{% trans "unpublished" %}</span>{% endif %}{% endblock %}

{% block submenu %}
{% include "gprot/menu.html" with tab='edit' gprot=gprot %}
{% endblock %}

{% block content %}
<table class="table">
    <tr>
        <th>{% trans "Examiner" %}</th>
        <td>{{ gprot.examiner.get_full_name }}</td>
    </tr>
    <tr>
        <th>{% trans "Exam date" %}</th>
        <td>{{ gprot.exam_date|date:"Y-d-m" }}</td>
    </tr>
</table>
<hr/>
<form method="post" action="">
{% csrf_token %}
<textarea id="gprot-content" rows="10" cols="40" name="content">{{ gprot.content }}</textarea>
<p style="margin-top:5px; text-align:right;">
{% if gprot.published %}
<button class="btn btn-primary">{% trans "Save changes" %}</button>
{% else %}
<button class="btn btn-primary" name="publish">{% trans "Save and publish" %}</button>
<button class="btn btn-default" name="save">{% trans "Save only" %}</button>
{% endif %}
</p>
</form>
{% endblock %}

{% block js %}
<script type="text/javascript" src="{{ STATIC_URL }}js/ckeditor/ckeditor.js"></script>
<script type="text/javascript">
CKEDITOR.replace('gprot-content', {
    extraPlugins: 'mathjax',
    height: 350,
    toolbarGroups: [
        { name: 'clipboard',   groups: [ 'clipboard', 'undo' ] },
        { name: 'editing',     groups: [ 'find', 'selection' ] },
        { name: 'links' },
        { name: 'insert' },
        { name: 'forms' },
        { name: 'tools' },
        { name: 'document',    groups: [ 'mode', 'document', 'doctools' ] },
        { name: 'others' },
        '/',
        { name: 'basicstyles', groups: [ 'basicstyles', 'cleanup' ] },
        { name: 'paragraph',   groups: [ 'list', 'indent', 'blocks', 'align' ] },
        { name: 'styles',      groups: [ ] },
        { name: 'about' }
    ],
    'stylesSet': 'default',
    'linkShowTargetTab': false
});
</script>
{% endblock %}
